<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device, initial-scale=1.0">
    <title>Εφαρμογή μου</title>
    <style>
        body {
            font-family: sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }
        .container {
            background-color: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        button {
            margin: 10px;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
        }
        #google-signin-button {
            background-color: #4285F4;
            color: white;
        }
        #google-signin-button:hover {
            background-color: #357ae8;
        }
        #google-signout-button {
            background-color: #db4437;
            color: white;
        }
         #google-signout-button:hover {
            background-color: #c33d2e;
        }
        #viva-wallet-payment-button {
            background-color: #004a99; /* Viva Wallet blue */
            color: white;
        }
         #viva-wallet-payment-button:hover {
            background-color: #003a7a;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Καλώς ορίσατε στην Εφαρμογή μου</h1>

        <div id="auth-status">
            <p>Παρακαλώ συνδεθείτε.</p>
        </div>

        <button id="google-signin-button">Σύνδεση με Google</button>
        <button id="google-signout-button" class="hidden">Αποσύνδεση από Google</button>

        <hr style="margin: 30px 0;">

        <button id="viva-wallet-payment-button">Πληρωμή μέσω Viva Wallet</button>
    </div>

    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <script>
        // Replace with your actual Google Client ID
        const GOOGLE_CLIENT_ID = 'YOUR_GOOGLE_CLIENT_ID';

        // Function to handle Google Sign-in
        function handleCredentialResponse(response) {
            // This function is called after successful sign-in.
            // The 'response.credential' contains the ID token.
            // You MUST send this token to your backend for verification.
            console.log("Google ID Token:", response.credential);

            // TODO: Send the token to your backend for verification and user session management.
            // Example: fetch('/api/verify-google-token', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ token: response.credential }) });

            document.getElementById('auth-status').innerText = 'Συνδεδεμένος με Google.';
            document.getElementById('google-signin-button').classList.add('hidden');
            document.getElementById('google-signout-button').classList.remove('hidden');
        }

        // Function to handle Google Sign-out
        function handleSignOut() {
             // In a production app, you would also invalidate the session on your backend.
             console.log('User signed out.');

             document.getElementById('auth-status').innerText = 'Παρακαλώ συνδεθείτε.';
             document.getElementById('google-signin-button').classList.remove('hidden');
             document.getElementById('google-signout-button').classList.add('hidden');

             // You might need additional steps here depending on how you manage sessions.
        }

        // Render the Google Sign-in button
        // This uses the newer Identity Services library.
        window.onload = function () {
            google.accounts.id.initialize({
                client_id: GOOGLE_CLIENT_ID,
                callback: handleCredentialResponse // Function to call after sign-in
            });
             google.accounts.id.renderButton(
                document.getElementById("google-signin-button"),
                { theme: "outline", size: "large", text: "signin_with" }  // Customization options
            );

            // Add event listener for the sign-out button
            document.getElementById('google-signout-button').addEventListener('click', handleSignOut);
        };


        // Function to initiate Viva Wallet payment (replace with your actual implementation)
        document.getElementById('viva-wallet-payment-button').addEventListener('click', function() {
            // TODO: Implement the actual Viva Wallet payment initiation.
            // This will likely involve:
            // 1. Making a request to your backend to create a payment order with Viva Wallet.
            // 2. Your backend receives the payment URL or transaction ID from Viva Wallet.
            // 3. Your frontend redirects the user to the Viva Wallet payment page using the URL
            //    or uses a Viva Wallet SDK to open a payment modal.

            alert("Εκκίνηση πληρωμής μέσω Viva Wallet... (Η λειτουργία δεν έχει υλοποιηθεί πλήρως)");

            // Example (replace with actual Viva Wallet integration):
            // window.location.href = 'YOUR_VIVA_WALLET_PAYMENT_URL';
        });

    </script>
</body>
</html>
